{% extends 'model-page.html'%}
{% load static %}


{% block content %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.min.js"></script>

<link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">



  <div class="redenc mb-3 d-flex align-items-center justify-content-between ">
    <div>
      <img src="{% static 'images/virtua_full.svg' %}" alt="Imagem" style="width: auto; height: 50px; margin-right: 10px;">
    </div>
      <h1 class="mb-0">MATRICULAS X CHECKPOINT</h1>
      <img src="{% static 'images/branco.svg' %}" alt="" style="width: auto; height: 50px; margin-right: 10px;">
      
  </div>

 
<div class="container  mb-4">
 
  <table class="table">
      <thead>
          <tr>
            {% for data in spacepoint_data %}
              {% if forloop.first %}
                <th class="align-items-baseline"><span class="tb-inicial">{{ data.id_processos__data_inicial_processo|date:'d/m/Y' }}</span></th>
              {% endif %}
            {% endfor %}

              {% for data in spacepoint_data %}
              <th class="text-start text-sm text-truncate">{{ data.data_spacepoint|date:"d/m/Y" }}</th>
              
              {% endfor %}  

            {% for data in spacepoint_data %}
              {% if forloop.first %}
                <th ><span class="tb-final">{{ data.id_processos__data_final_processo|date:'d/m/Y' }}</span></th>
              {% endif %}
            {% endfor %}
          </tr>
      </thead>
        <tr>
          <td class="text-start">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="green" class="bi bi-arrow-down-circle-fill" viewBox="0 0 16 16">
              <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293z"/>
            </svg>
          </td>
            {% for data in spacepoint_data %}
            <td class="text-start">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-down-circle-fill" viewBox="0 0 16 16">
                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293z"/>
              </svg>
            </td>
            {% endfor %} 
            <td class="text-start">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="blue" class="bi bi-arrow-down-circle-fill" viewBox="0 0 16 16">
                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293z"/>
              </svg>
            </td>
        </tr>
       
          <td  colspan=14 class="text-start">
            <div class="progress" role="progressbar" aria-label="Animated striped example" aria-valuenow="{{matriculas_por_total|floatformat:2}}" aria-valuemin="0" aria-valuemax="100" style="height: 30px;">
              <div class="progress-bar progress-bar-striped progress-bar-animated" style="width: {{matriculas_por_total|floatformat:2}}%">{{matriculas_por_total|floatformat:2}}%</div>
            </div>
          </td>
        <tr>
          <td>
            {% for data in spacepoint_data %}
            <th class="text-start text-sm text-truncate">{{ data.meta_pc }}%</th>
            {% endfor %} 
          </td>
          <th>100%</th>
        </tr>
  </table>
</div>
<div class="container">
  <div class="row text-center">
    <div class="col">
      <h4>Ritmo de Matrículas Rede: {{ ritmo |floatformat:2 }} matrículas por dia</h4>
    </div>
    <div class="col">
      <h4>Ritmo da Meta: {{ ritmo_meta|floatformat:2 }} matrículas por dia</h4>
    </div>
  </div>
  
</div>

<div class=" row mb-4 " style="scale: 0.94;">
  <div class="col-9">
    <table class="table mt-5">
        <thead>
            <tr>
              <th class="text-start">POLO</th>
                {% for data in spacepoint_data %}
                  {% if forloop.first %}
              <th class="align-items-baseline"><span class="tb-inicial">{{ data.id_processos__data_inicial_processo|date:'d/m/Y' }}</span></th>
                  {% endif %}
                {% endfor %}

                {% for data in spacepoint_data %}
              <th class="text-start text-sm text-truncate">{{ data.data_spacepoint|date:"d/m/Y" }}</th>
                {% endfor %}  

                {% for data in spacepoint_data %}
                  {% if forloop.first %}
              <th ><span class="tb-final">{{ data.id_processos__data_final_processo|date:'d/m/Y' }}</span></th>
                  {% endif %}
                {% endfor %}
            </tr>
        </thead>
        <td></td>
        <td class="text-start">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="green" class="bi bi-arrow-down-circle-fill" viewBox="0 0 16 16">
            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293z"/>
          </svg>
        </td>
          {% for data in spacepoint_data %}
          <td class="text-start">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-down-circle-fill" viewBox="0 0 16 16">
              <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293z"/>
            </svg>
          </td>
          {% endfor %} 
          <td class="text-start">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="blue" class="bi bi-arrow-down-circle-fill" viewBox="0 0 16 16">
              <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293z"/>
            </svg>
          </td>
          {% for polo_id, matriculas in matriculas_por_polo.items %}
            <tr>
              <td class="text-start text-truncate">{{ matriculas.polo.nome }}</td>
              <td  colspan=8 class="text-start">
                <div class="progress" role="progressbar" aria-label="Animated striped example" aria-valuenow="{{ matriculas.percentual_metas|default:"N/A"| floatformat:2 }}" aria-valuemin="0" aria-valuemax="100" style="height: 20px;">
                  <div class="progress-bar progress-bar-striped progress-bar-animated" style="width: {{ matriculas.percentual_metas|default:"N/A"| floatformat:2 }}%">{{ matriculas.percentual_metas|default:"N/A"| floatformat:2 }}%</div>
                </div>
                {% endfor %} 
              </td>
            </tr>           
          <tr>
            <td></td>
            <td>
              {% for data in spacepoint_data %}
              <th class="text-start text-sm text-truncate">{{ data.meta_pc }}%</th>
              {% endfor %} 
            </td>
            <th>100%</th>
          </tr>
    </table>
  </div>
  <div class="col-1">
    <table class="table mt-5">
      <thead>
        <tr>
          <th class="text-center">Ritmo</th>
        </tr>
        <tr>
          <th class="text-center">Atual</th>
        </tr>
      </thead>
      <tbody>
        {% for ritmo_polo_item in ritmo_polo %}
        <tr>
          <td class="text-center">{{ ritmo_polo_item.ritmo |floatformat:2 }}</td>
        {% endfor %}
        </tr>
 

        </tr>
      </tbody>
    </table>
  </div>
  <div class="col-1">
    <table  class="table mt-5">
      <thead>
        <tr>
          <th class="text-center">Ritmo</th>
        </tr>
        <tr>
          <th class="text-center">Meta</th>
        </tr>
      </thead>
      <tbody>
        {% for polo_id, matriculas in matriculas_por_polo.items %}
        <tr>
          <td class="text-center">{{ matriculas.ritmo_polo_meta |floatformat:2 }}</td>
        {% endfor %}
        <td></td>
        <td></td>
        </tr>
      </tbody>
    </table>
    </div>
</div>

  


  




<style>
  .fs-10{
    font-size: 12px;
  }

  .linha-totais {
    font-weight: bold;
  }
</style>



{% endblock %}